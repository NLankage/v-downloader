<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Download Page</title>
  <style>
    :root {
      --primary: #fc38ae;
      --secondary: #0ba360;
      --primary-dark: #ce4b99;
      --danger: #e63946;
      --bg: #0f0f1a;
      --text: #e0e0e0;
      --card-bg: #1a1a2e;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px 15px;
      line-height: 1.6;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
    }

    .top-ad-container {
      text-align: center;
      margin: 0 auto 25px;
      max-width: 100%;
    }
    .ad-728x90, .ad-320x50 {
      margin: 0 auto;
    }

    .ad-728x90 { display: none; }
    .ad-320x50 { display: none; }

    @media (min-width: 768px) {
      .ad-728x90 { display: block; }
    }

    @media (max-width: 767px) {
      .ad-320x50 { display: block; }
    }

    .bottom-vertical-ads {
      display: none;
      flex-direction: column;
      gap: 20px;
      margin: 40px auto 20px;
      max-width: 100%;
    }
    .bottom-vertical-ads .ad-item {
      width: 100%;
      min-height: 100px;
      background: #222;
      border-radius: 8px;
      overflow: hidden;
    }
    @media (max-width: 1024px) {
      .bottom-vertical-ads { display: flex; }
    }

    h1 { text-align:center; color:var(--primary); margin:20px 0 0 0; font-size: clamp(1.8rem,6vw,2.4rem); }
    #title-display { text-align:center; font-size:clamp(1.3rem,5vw,1.7rem); margin:20px 0 0 0; color:#fff; font-weight:500; min-height:2.5em; }
    #how-to-section { margin:30px 0 40px; text-align:center; }
    #how-to-heading { font-size:clamp(1.2rem,4.5vw,1.4rem); margin-bottom:20px; color:var(--primary); }
    #how-to-instructions {
      background:var(--card-bg);
      border-radius:12px;
      padding:24px;
      text-align:left;
      font-size:clamp(0.95rem,3.2vw,1.05rem);
    }
    #how-to-instructions ol, #how-to-instructions ul { padding-left:24px; margin:15px 0; }
    #how-to-instructions li { margin-bottom:12px; }
    #how-to-instructions .highlight { color:#ffcc00; font-weight:600; }
    #button-container { 
      display: none;
      flex-direction:column; 
      gap:16px; 
      margin:30px 0; 
    }
    .btn {
      height:72px;
      border:none;
      border-radius:12px;
      font-size:clamp(1rem,4vw,1.15rem);
      font-weight:600;
      cursor:pointer;
      color:white;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:4px;
      transition:all 0.25s;
    }
    .btn-primary { background:linear-gradient(135deg,var(--primary),var(--primary-dark)); }
    .btn-primary:hover:not(.disabled):not(.checking) { transform:translateY(-2px); box-shadow:0 8px 20px rgba(11,163,96,0.3); }
    .btn.disabled { background:#444; cursor:not-allowed; opacity:0.6; }
    .checking { background:#555 !important; cursor:wait; }
    .error-btn { background:var(--danger) !important; }
    .success { background:#2d6a4f !important; cursor:default; }
    #finalUnlockBtn {
      display:none;
      background:linear-gradient(135deg,#fc38ae,#ce4b99);
      height:80px;
      font-size:clamp(1.1rem,4.5vw,1.3rem);
    }
    #error-message, #adblock-warning {
      display:none;
      text-align:center;
      color:var(--danger);
      font-size:clamp(1.1rem,4vw,1.3rem);
      padding:40px 20px;
      background:rgba(230,57,70,0.12);
      border:2px solid var(--danger);
      border-radius:12px;
      margin:40px auto;
      max-width:540px;
    }
    #adblock-warning button {
      margin-top:20px;
      padding:12px 30px;
      font-size:1.1rem;
      background:var(--secondary);
      color:white;
      border:none;
      border-radius:8px;
      cursor:pointer;
    }

    @media (max-width:480px) {
      body { padding:15px 10px; }
      .btn { height:64px; font-size:1rem; }
    }
  </style>
</head>
<body>

  <div class="container">

    <h1 id="title-display">Loading...</h1>

    <!-- Top banner ad area -->
    <div class="top-ad-container">
      <div class="ad-728x90">
        <script>
          atOptions = {
            'key' : '001a3d3ef6e93c6a44d0b84604049a79',
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
          };
        </script>
        <script src="https://exasperatebubblyorthodox.com/001a3d3ef6e93c6a44d0b84604049a79/invoke.js"></script>
      </div>

      <div class="ad-320x50">
        <script>
          atOptions = {
            'key' : 'f86cec05dfb3d2e32c0ae6d225f9e2f3',
            'format' : 'iframe',
            'height' : 50,
            'width' : 320,
            'params' : {}
          };
        </script>
        <script src="https://exasperatebubblyorthodox.com/f86cec05dfb3d2e32c0ae6d225f9e2f3/invoke.js"></script>
      </div>
    </div>

    <div id="how-to-section">
      <h2 id="how-to-heading">‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù Download ‡∂ö‡∂ª‡∂±‡∑ä‡∂±‡∑ô ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø?</h2>
      <div id="how-to-instructions">
        <ol>
          <li><strong>‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 1</strong> Button ‡∂ë‡∂ö Click ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</li>
          <li><strong>‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 2</strong> Button ‡∂ë‡∂ö Click ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</li>
          <li>‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª ‡∂Ø‡∑ô‡∂ö‡∂∏ ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏‡∑ä <strong>Download Now!</strong> Button ‡∂ë‡∂ö Unlock ‡∑Ä‡∑ö.</li>
        </ol>
        <ul>
          <li>‡∑É‡∑ë‡∂∏ ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª‡∂ö‡∂Ø‡∑í‡∂∏ <span class="highlight">‡∂Ö‡∑Ä‡∂∏ ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª 8‡∂ö‡∑ä ‡∂ª‡∑ê‡∂≥‡∑ì ‡∑É‡∑í‡∂ß‡∑ì‡∂∏ ‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∑í.</span>.</li>
          <li><span class="highlight">AdBlock Disable</span> ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∑í.</li>
          <li>Popup window ‡∂ë‡∂ö‡∂ö‡∑ä show ‡∂ã‡∂±‡∑ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫‡∂∫‡∑ô‡∂±‡∑ä <span class="highlight">Allow</span> / <span class="highlight">Always Show</span> ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</li>
        </ul> 
      </div>
    </div>

    <div id="button-container">
      <button id="btn1" class="btn btn-primary">
        <span>üîì ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 01</span>
        <span>‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>
      </button>
      <button id="btn2" class="btn btn-primary disabled">
        <span>üîì ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 02</span>
        <span>‡∂ä‡∑Ö‡∂ü ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª</span>
      </button>
      <button id="finalUnlockBtn" class="btn">
        <span>Download Now!</span>
      </button>
    </div>

    <div id="error-message">
      <h2>‚ö†Ô∏è Video Not Found</h2>
      <p id="error-text">Wrong ID or URL</p>
    </div>

    <div id="adblock-warning">
      <h2>‚ö†Ô∏è Ad Blocker Detected!</h2>
      <p>‡∂î‡∂∂‡∂ú‡∑ö Ad Blocker ‡∂ë‡∂ö disable ‡∂ö‡∂ª page ‡∂ë‡∂ö refresh ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>
      <button onclick="location.reload()">Refresh ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
    </div>

    <!-- native ads -->
    <div class="bottom-vertical-ads">
      <div class="ad-item">
        <script async="async" data-cfasync="false" src="https://exasperatebubblyorthodox.com/e288e27a370c8e9e555ae2822c3f8be1/invoke.js"></script>
        <div id="container-e288e27a370c8e9e555ae2822c3f8be1"></div>
      </div>
    </div>
  </div>

  <script>
    const JSON_FILE = 'data.json';
    const requiredSeconds = 8;

    let videoData = null;
    let clickTime = 0;
    let activeBtnId = null;
    let nextBtnId = null;
    let isChecking = false;
    let timerInterval = null;

    const part1 = "‡∂î‡∂∫‡∑è ‡∑Ñ‡∑í‡∂ß‡∑í‡∂∫‡∑ö ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª ";
    const part2 = " ‡∂∫‡∑í!\n‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª 8‡∂ö‡∑ä ‡∂ª‡∑ê‡∂≥‡∑ì ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±.";
    const popupErrorMsg = "‚ö†Ô∏è Popup Blocked!\n\nBrowser settings ‚Üí Pop-ups and redirects ‚Üí Allow ‡∂ö‡∂ª‡∂Ω‡∑è ‡∂Ü‡∂∫‡∑ô ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.";

    async function loadAndFindVideo() {
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');

      document.getElementById('button-container').style.display = 'none';

      if (!id) {
        showError("");
        return;
      }

      try {
        const response = await fetch(JSON_FILE);
        if (!response.ok) throw new Error("Data file loading error");
        const data = await response.json();

        if (!Array.isArray(data)) throw new Error("Invalid data format");

        videoData = data.find(item => item.id === id);

        if (!videoData || !videoData.title || !videoData.download_url) {
          showError("");
          return;
        }

        // Valid data found ‚Üí show buttons + title
        document.getElementById('title-display').innerHTML = `üé¨ ${videoData.title}`;
        document.getElementById('title-display').style.color = '#ffffff';
        document.getElementById('button-container').style.display = 'flex';

      } catch (err) {
        showError("Data loading error: " + err.message);
      }
    }

    function showError(msg) {
      document.getElementById('button-container').style.display = 'none';
      document.getElementById('how-to-section').style.display = 'none';
      document.getElementById('error-message').style.display = 'block';
      document.getElementById('error-text').innerText = msg;
      document.getElementById('title-display').innerHTML = "Error";
    }

    function detectAdblock(callback) {
      const bait = document.createElement('div');
      bait.innerHTML = '&nbsp;';
      bait.className = 'adsbygoogle google_ad google-ad-container text-ad banner-ad';
      bait.style.cssText = 'height:1px; position:absolute; top:-9999px; width:300px;';
      document.body.appendChild(bait);
      setTimeout(() => {
        const isHidden = (
          bait.offsetHeight === 0 ||
          bait.offsetParent === null ||
          window.getComputedStyle(bait).display === 'none' ||
          bait.getBoundingClientRect().height < 1
        );
        document.body.removeChild(bait);
        callback(isHidden);
      }, 800);
    }

    function handleStep(key, currentId, nextId) {
      checkTimeAndUnlock(currentId, nextId, links[key]);
    }

    function checkTimeAndUnlock(currentId, nextId, url) {
      const newWin = window.open(url, '_blank');
      if (!newWin || newWin.closed || typeof newWin.closed === 'undefined') {
        alert(popupErrorMsg);
        return;
      }
      clickTime = Date.now();
      activeBtnId = currentId;
      nextBtnId = nextId;
      isChecking = true;

      const btn = document.getElementById(currentId);
      btn.classList.add('checking');
      btn.classList.remove('error-btn');

      let timeLeft = requiredSeconds;
      btn.innerHTML = `<span>‚è≥ Checking...</span><span>‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª ${timeLeft}‡∂ö ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±</span>`;

      timerInterval && clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft--;
        if (timeLeft >= 0) {
          btn.innerHTML = `<span>‚è≥ Checking...</span><span>‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª ${timeLeft}‡∂ö ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±</span>`;
        }
      }, 1000);
    }

    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === 'visible' && isChecking) {
        const timeSpent = (Date.now() - clickTime) / 1000;
        clearInterval(timerInterval);

        if (timeSpent < requiredSeconds) {
          isChecking = false;
          alert(part1 + Math.floor(timeSpent) + part2);
          const btn = document.getElementById(activeBtnId);
          btn.classList.remove('checking');
          btn.classList.add('error-btn');
          btn.innerHTML = `<span>‚ö†Ô∏è ‡∂Ö‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í!</span><span>‡∂±‡∑ê‡∑Ä‡∂≠ click ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>`;
        } else {
          isChecking = false;
          markSuccess(activeBtnId, nextBtnId);
        }
      }
    });

    function markSuccess(currentId, nextId) {
      const btn = document.getElementById(currentId);
      btn.classList.add('success', 'disabled');
      btn.innerHTML = `<span>‚úÖ ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂∫‡∑í</span><span>Done!</span>`;

      if (nextId === 'final') {
        document.getElementById('finalUnlockBtn').style.display = 'flex';
      } else {
        const nextBtn = document.getElementById(nextId);
        nextBtn.classList.remove('disabled');
        const step = nextId.replace('btn', '');
        nextBtn.innerHTML = `<span>üîì ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 0${step}</span><span>‡∂Ø‡∑ê‡∂±‡∑ä ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>`;
      }
    }

    document.getElementById('finalUnlockBtn').onclick = () => {
      if (videoData && videoData.download_url) {
        window.location.href = videoData.download_url;
      } else {
        alert("Download link not found!");
      }
    };

    window.addEventListener('load', () => {
      detectAdblock((blocked) => {
        if (blocked) {
          document.getElementById('button-container').style.display = 'none';
          document.getElementById('how-to-section').style.display = 'none';
          document.getElementById('adblock-warning').style.display = 'block';
          return;
        }
        loadAndFindVideo();
      });
    });

    document.getElementById('btn1').onclick = () => {
      if (!document.getElementById('btn1').classList.contains('disabled') &&
          !document.getElementById('btn1').classList.contains('checking')) {
        handleStep('step1', 'btn1', 'btn2');
      }
    };

    document.getElementById('btn2').onclick = () => {
      if (!document.getElementById('btn2').classList.contains('disabled') &&
          !document.getElementById('btn2').classList.contains('checking')) {
        handleStep('step2', 'btn2', 'final');
      }
    };

    const links = {
      step1: "https://otieu.com/4/9263262",
      step2: "https://otieu.com/4/9250881"
    };
  </script>
</body>
</html>